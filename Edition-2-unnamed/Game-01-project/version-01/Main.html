<!DOCTYPE html>
<html lang="en">
<meta name="viewport" content="width=device-width, initial-scale=1.0" />

<head>
<link rel="stylesheet" href="css.css">

  <script>
    var myGamePiece;
    var myObstacles = [];

    function startGame() {
      myGamePiece = new component(30, 30, "#03a9f4", 10, 400);
      myGameArea.start();
    }

    var myGameArea = {
      canvas: document.createElement("canvas"),
      start: function() {
        this.canvas.width = 1340;
        this.canvas.height = 500;
        this.context = this.canvas.getContext("2d");
        //document.body.insertBefore(this.canvas, document.body.childNodes[0]);
        document.body.insertBefore(this.canvas, document.getElementById('pook'));
        // document.body.insertBefore(this.canvas, document.getElementByTagName('div'));
        this.frameNo = 0;
        this.interval = setInterval(updateGameArea, 5);
      },
      clear: function() {
        this.context.clearRect(0, 0, this.canvas.width, this.canvas.height);
      },
      stop: function() {
        clearInterval(this.interval);
      }
    }

    function component(width, height, color, x, y) {
      this.width = width;
      this.height = height;
      this.speedX = 0;
      this.speedY = 0;
      this.x = x;
      this.y = y;
      this.bounce = 0.1;

      this.update = function() {
        ctx = myGameArea.context;
        ctx.fillStyle = color;
        ctx.fillRect(this.x, this.y, this.width, this.height);
      }
      this.newPos = function() {
        this.x += this.speedX;
        this.y += this.speedY;
      }
      this.crashWith = function(otherobj) {
        var myleft = this.x;
        var myright = this.x + (this.width);
        var mytop = this.y;
        var mybottom = this.y + (this.height);
        var otherleft = otherobj.x;
        var otherright = otherobj.x + (otherobj.width);
        var othertop = otherobj.y;
        var otherbottom = otherobj.y + (otherobj.height);
        var crash = true;
        if ((mybottom < othertop) || (mytop > otherbottom) || (myright < otherleft) || (myleft > otherright)) {
          crash = false;
        }
        return crash;
      }
    }

    function updateGameArea() {
      var x, height, gap, minHeight, maxHeight, minGap, maxGap;
      for (i = 0; i < myObstacles.length; i += 1) {
        if (myGamePiece.crashWith(myObstacles[i])) {
          myGameArea.stop();
          return;
        }


      }
      myGameArea.clear();
      myGameArea.frameNo += 1;
      if (myGameArea.frameNo == 1 || everyinterval(150)) {
        x = myGameArea.canvas.width;
        minHeight = 20;
        maxHeight = 200;
        height = Math.floor(Math.random() * (maxHeight - minHeight + 1) + minHeight);
        minGap = 100;
        maxGap = 60;
        gap = Math.floor(Math.random() * (maxGap - minGap + 1) + minGap);
        myObstacles.push(new component(10, height, "#03a9f4", x, 0));
        myObstacles.push(new component(10, x - height - gap, "#03a9f4", x, height + gap));
      }
      for (i = 0; i < myObstacles.length; i += 1) {
        myObstacles[i].x += -1;
        myObstacles[i].update();
      }
      myGamePiece.newPos();
      myGamePiece.update();
    }

    function everyinterval(n) {

      if ((myGameArea.frameNo / n) % 1 == 0) {

        return true;
      }
      return false;
    }




    function moveup() {
      myGamePiece.speedY = -1;



    }

    function moveup10x() {
      myGamePiece.speedY = -5;



    }


    function movedown() {
      myGamePiece.speedY = 1;



    }

    function movedown10x() {
      myGamePiece.speedY = 5;



    }

    function moveleft() {
      myGamePiece.speedX = -1;


    }

    function moveleft10x() {
      myGamePiece.speedX = -5;


    }

    function moveright() {
      myGamePiece.speedX = 1;


    }

    function moveright10x() {
      myGamePiece.speedX = 5;


    }



    function keys(event) {

      if (event.keyCode === 38) {
        moveup();
        // clearmove();
      }
      if (event.keyCode === 37) {
        moveleft();
        // clearmove();
      }


      if (event.keyCode === 39) {
        moveright();
        // clearmove();
      }



      if (event.keyCode === 40) {
        movedown();
        // clearmove();
      }

    





    }


    function controls() {
      // var body = document.getElementByTagName('body');
      document.body.addEventListener('keydown', keys);

    }


    function clearmove() {
      myGamePiece.speedX = 0;
      myGamePiece.speedY = 0;
    }






    function instructions() {
      alert(
        'thank you for comming to our game.the way to control this version of the game you need to us the arrow keys, so the up arrow key goes up, the down arrow key makes the sprite go down, the left key makes it go left,  the right one goes right and, the space bar makes it pause and if you are in real trouble use the new keyboard to go up quickly so r is go up d is go left fast f is go right fast and v to go down fast.'
      );

    }
  </script>
</head>

<body onload="controls()">
<button onclick="startGame()">start game</button>
    <h1 style="color:#03a9f4; text-align:center;"><u>
      super Tres-2b
    </u></h1>


  <div id="pook">
  </div>


</body>

</html>